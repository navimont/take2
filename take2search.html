{% extends "take2baseclass.html" %}

{% block content %}
    <header>
      {% if signed_in %}
        <!-- Show birthdays for signed in users -->
        {% if birthdays %}
          <h1>Birthdays</h1>
          <ul id="birthdays">
            {% for person in birthdays %}
              <li>{{ person.name }} {% if person.nickname %} ({{ person.nickname }}) {% endif %} *{{ person.birthday }}
            {% endfor %}
          </ul>
        {% endif %}
      {% else %}
        <p>You need to sign in to use this site (a google account will do).</p>
      {% endif %}
    </header>
    {% if result %}
        {% if query %}
          <header>
            <h1>{{ result|length }} Results for "{{ query|escape }}":</h1>
          </header>
        {% endif %}
      {% for contact in result %}
        <article id="results">
          <aside class="contact_navigation">
            <ul>
              {% if contact.can_edit %}
                <li><a href="javascript:void(0)" onClick="post_to_url('editcontact', {'key': '{{contact.key}}'});">edit</a></li>
                <li><a href="javascript:void(0)" onClick="post_to_url('editcontact', {'key': '{{contact.key}}'});">share</a></li>
              {% else %}
                <li><a href="javascript:void(0)" onClick="post_to_url('editcontact', {'key': '{{contact.key}}'});">connect</a></li>
              {% endif %}
              <li><a href="javascript:void(0)" onClick="post_to_url('editcontact', {'key': '{{contact.key}}'});">locate</a></li>
            </ul>
          </aside>
          <header>
            <h2>
              {{ contact.name }}
              {% if contact.nickname %}
                  ({{contact.nickname}})
              {% endif %}
              {{contact.lastname}}
              {% if contact.birthday %}
                  &nbsp;*{{contact.birthday}} {{contact.birthmonth}}
              {% endif %}
            </h2>
            {% for relation in contact.relations %}
              <h3>
                {{relation}}
              </h3>
            {% endfor %}
          </header>
          <!-- properties for this contact -->
          {% for take2 in contact.take2 %}
            <hr>
            {% if take2.class_name == 'Link' %}
              {% for data in take2.data %}
                <a id="contact_link" href="/search?key={{data.link_to}}">{{data.data}}</a>
                {% if not forloop.last %}
                  ,&nbsp;
                {% endif%}
              {% endfor %}
            {% else %}
              <ul>
                {% for data in take2.data %}
                  <li>{{data.data}}</li>
                {% endfor %}
              </ul>
            {% endif %}
          {% endfor %}
        </article>
      {% endfor %}
    {% else %}
      {% if signed_in %}
        <header>
          {% if query %}
              <h1>Nothing found for {{ query|escape }}</h1>
          {% endif %}
        <header>
      {% endif %}
    {% endif %}
  <footer>
  </footer>
{% endblock %}
