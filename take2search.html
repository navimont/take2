{% extends "take2baseclass.html" %}

{% block title %}
Search for address
{% endblock %}

{% block content %}
  <section id="birthdays">
    {% if not signed_in %}
      <p>If you are a new user, please log in (a google account will do).</p>
    {% else %}
      <!-- Show birthdays for signed in users -->
      {% if birthdays %}
        <header>
          <h1>Birthdays</h1>
        </header>
        <ul>
          {% for person in birthdays %}
            <li>{{ person.name }} {% if person.nickname %} ({{ person.nickname }}) {% endif %} *{{ person.birthday }}
          {% endfor %}
        </ul>
      {% endif %}
    {% endif %}
  </section>
  {% if result %}
    <section id="results">
      {% if query %}
        <header>
          <h1>{{ result|length }} Results for "{{ query|escape }}":</h1>
        </header>
      {% endif %}
      {% for contact in result %}
        <article>
          <aside class="contact_navigation">
            <ul>
              {% if contact.can_edit %}
                <li><a href="javascript:void(0)" onClick="post_to_url('editcontact', {'key': '{{contact.key}}'});">edit</a></li>
              {% endif %}
              <li><a href="javascript:void(0)" onClick="post_to_url('editcontact', {'key': '{{contact.key}}'});">connect</a></li>
              <li><a href="javascript:void(0)" onClick="post_to_url('editcontact', {'key': '{{contact.key}}'});">locate</a></li>
            </ul>
          </aside>
          <header>
            <h2>
              {{ contact.name }}
              {% if contact.nickname %}
                  &nbsp;({{contact.nickname}})
              {% endif %}
              {{contact.lastname}}
              {% if contact.birthday %}
                  &nbsp;*{{contact.birthday}}
              {% endif %}
            </h2>
            {% if contact.relation_to_me %}
              <div class="contact_relation">
                {{contact.relation_to_me}}
              </div>
            {% endif %}
            {% if contact.user %}
              <div class="contact_account">
                  Google account: {{contact.user.nickname}}
              </div>
            {% endif %}
          </header>
          <aside class="contact_links">
            {% if contact.link %}
              <hr>
              <ul>
                {% for link in contact.link %}
                  <li>{{link.link}}
                {% endfor %}
              </ul>
            {% endif %}
          </aside>
          <!-- properties for this contact -->
          {% if contact.mobile %}
            <hr>
            <ul>
              {% for mobile in contact.mobile %}
                <li>{{mobile.mobile}}
              {% endfor %}
            </ul>
          {% endif %}
          {% if contact.web %}
            <hr>
            <ul>
              {% for web in contact.web %}
                <li>{{web.web}}
              {% endfor %}
            </ul>
          {% endif %}
          {% if contact.email %}
            <hr>
            <ul>
              {% for email in contact.email %}
                <li>{{email.email}}
              {% endfor %}
            </ul>
          {% endif %}
          {% if contact.address %}
            <hr>
            <ul>
              {% for address in contact.address %}
                <li>{{address.address}}
              {% endfor %}
            </ul>
          {% endif %}
          {% if contact.other %}
            <hr>
            <ul>
              {% for other in contact.other %}
                <li>{{other.what}}:&nbsp;{{other.text}}
              {% endfor %}
            </ul>
          {% endif %}
        </article>
      {% endfor %}
    </section>
  {% else %}
    {% if signed_in %}
      <section id="results">
        {% if query %}
            <h1>Nothing found for {{ query|escape }}</h1>
        {% endif %}
      </section>
    {% endif %}
  {% endif %}
  <footer>
  </footer>
{% endblock %}
